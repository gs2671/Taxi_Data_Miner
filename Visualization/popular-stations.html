<<!DOCTYPE html>
<html>
<head>
    <title>Popular Stations</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="//d3js.org/d3.v3.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">

 </script> 
 <style type="text/css">#map_canvas {
    width: 100%;
    height: 100%;
}</style>
 <script type="text/javascript">
 $(document).ready(function () {

    d3.csv("../Results/hot_routes.csv", function(error, data) {
$.getJSON("../Data/station-id.json", function(json) {
  
    var stations = [];
    stations = json['stationBeanList'];
  
  if (error) throw error;
  
stations.forEach(function(s){

data.forEach(function(d){
    if(s.id == d.start_station_id){
        d.start_lat = s.latitude;
        d.start_long = s.longitude;
    }
    else if(s.id == d.end_station_id){
        d.end_lat = s.latitude;
        d.end_long = s.longitude;
    }
});

});
  console.log(data);
  var map;
    var elevator;
    var myOptions = {
        zoom: 1,
        center: new google.maps.LatLng(0, 0),
        mapTypeId: 'roadmap'
    };
    map = new google.maps.Map($('#map_canvas')[0], myOptions);

    // console.log(stations);
    // var addresses = ['Norway', 'Africa', 'Asia','North America','South America'];

    directionsService = new google.maps.DirectionsService();
        directionsDisplay1 = new google.maps.DirectionsRenderer({
          suppressMarkers: false,
          suppressInfoWindows: true
        });
        directionsDisplay1.setMap(map);
    var location1 = new google.maps.LatLng(data[1].start_lat, data[1].start_long);
    var location2 = new google.maps.LatLng(data[1].end_lat, data[1].end_long);
        var request = {
          origin: location1, 
          destination: location2,
          travelMode: google.maps.DirectionsTravelMode.BICYCLING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay1.setDirections(response);
          }
        });
    

    directionsService = new google.maps.DirectionsService();
        directionsDisplay2 = new google.maps.DirectionsRenderer({
          suppressMarkers: false,
          suppressInfoWindows: true
        });
        directionsDisplay2.setMap(map);
    var location1 = new google.maps.LatLng(data[2].start_lat, data[2].start_long);
    var location2 = new google.maps.LatLng(data[2].end_lat, data[2].end_long);
        var request = {
          origin: location1, 
          destination: location2,
          travelMode: google.maps.DirectionsTravelMode.BICYCLING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay2.setDirections(response);
          }
        });
    
    directionsService = new google.maps.DirectionsService();
        directionsDisplay3 = new google.maps.DirectionsRenderer({
          suppressMarkers: false,
          suppressInfoWindows: true
        });
        directionsDisplay3.setMap(map);
    var location1 = new google.maps.LatLng(data[3].start_lat, data[3].start_long);
    var location2 = new google.maps.LatLng(data[3].end_lat, data[3].end_long);
        var request = {
          origin: location1, 
          destination: location2,
          travelMode: google.maps.DirectionsTravelMode.BICYCLING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay3.setDirections(response);
          }
        });

           directionsService = new google.maps.DirectionsService();
        directionsDisplay4 = new google.maps.DirectionsRenderer({
          suppressMarkers: false,
          suppressInfoWindows: true
        });
        directionsDisplay4.setMap(map);
    var location1 = new google.maps.LatLng(data[4].start_lat, data[4].start_long);
    var location2 = new google.maps.LatLng(data[4].end_lat, data[4].end_long);
        var request = {
          origin: location1, 
          destination: location2,
          travelMode: google.maps.DirectionsTravelMode.BICYCLING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay4.setDirections(response);
          }
        });

directionsService = new google.maps.DirectionsService();
     directionsDisplay5 = new google.maps.DirectionsRenderer({
          suppressMarkers: false,
          suppressInfoWindows: true
        });
        directionsDisplay5.setMap(map);
    var location1 = new google.maps.LatLng(data[5].start_lat, data[5].start_long);
    var location2 = new google.maps.LatLng(data[5].end_lat, data[5].end_long);
        var request = {
          origin: location1, 
          destination: location2,
          travelMode: google.maps.DirectionsTravelMode.BICYCLING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay5.setDirections(response);
          }
        });




           directionsService = new google.maps.DirectionsService();
        directionsDisplay6 = new google.maps.DirectionsRenderer({
          suppressMarkers: false,
          suppressInfoWindows: true
        });
        directionsDisplay6.setMap(map);
    var location1 = new google.maps.LatLng(data[6].start_lat, data[6].start_long);
    var location2 = new google.maps.LatLng(data[6].end_lat, data[6].end_long);
        var request = {
          origin: location1, 
          destination: location2,
          travelMode: google.maps.DirectionsTravelMode.BICYCLING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay6.setDirections(response);
          }
        });
           directionsService = new google.maps.DirectionsService();
     directionsDisplay7 = new google.maps.DirectionsRenderer({
          suppressMarkers: false,
          suppressInfoWindows: true
        });
     console.log(data[7]);
     console.log(data[6]);
        directionsDisplay7.setMap(map);
    var location1 = new google.maps.LatLng(data[7].start_lat, data[7].start_long);
    var location2 = new google.maps.LatLng(data[7].end_lat, data[7].end_long);
        var request = {
          origin: location1, 
          destination: location2,
          travelMode: google.maps.DirectionsTravelMode.BICYCLING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay7.setDirections(response);
          }
        });
           directionsService = new google.maps.DirectionsService();
     directionsDisplay8 = new google.maps.DirectionsRenderer({
          suppressMarkers: false,
          suppressInfoWindows: true
        });
        directionsDisplay8.setMap(map);
    var location1 = new google.maps.LatLng(data[8].start_lat, data[8].start_long);
    var location2 = new google.maps.LatLng(data[8].end_lat, data[8].end_long);
        var request = {
          origin: location1, 
          destination: location2,
          travelMode: google.maps.DirectionsTravelMode.BICYCLING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay8.setDirections(response);
          }
        });
        console.log(data[9]);
           directionsService = new google.maps.DirectionsService();
     directionsDisplay9 = new google.maps.DirectionsRenderer({
          suppressMarkers: false,
          suppressInfoWindows: true
        });
        directionsDisplay9.setMap(map);
    var location1 = new google.maps.LatLng(data[9].start_lat, data[9].start_long);
    var location2 = new google.maps.LatLng(data[9].end_lat, data[9].end_long);
        var request = {
          origin: location1, 
          destination: location2,
          travelMode: google.maps.DirectionsTravelMode.BICYCLING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay9.setDirections(response);
          }
        });
           directionsService = new google.maps.DirectionsService();
     directionsDisplay10 = new google.maps.DirectionsRenderer({
          suppressMarkers: false,
          suppressInfoWindows: true
        });
        directionsDisplay10.setMap(map);
    var location1 = new google.maps.LatLng(data[10].start_lat, data[10].start_long);
    var location2 = new google.maps.LatLng(data[10].end_lat, data[10].end_long);
        var request = {
          origin: location1, 
          destination: location2,
          travelMode: google.maps.DirectionsTravelMode.BICYCLING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay10.setDirections(response);
          }
        });
           
    


    // for (var x = 0; x < data.length; x++) {
    //     $.getJSON('http://maps.googleapis.com/maps/api/geocode/json?address='+addresses[x]+'&sensor=false', null, function (data) {
    //         var p = data.results[0].geometry.location
    //         var latlng = new google.maps.LatLng(p.lat, p.lng);
    //         new google.maps.Marker({
    //             position: latlng,
    //             map: map
    //         });

    //     });
    // }
});
  
})}); 
 </script>
</head>
<body>
<div id="map_canvas"></div>
</body>
</html>